<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="deal/listing"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ 'Request_details' | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openFirebaseUpdateModal()" [hidden]="!(item.createdBy == AuthId)" >
        Edit
      </ion-button> 
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="deals-details-content" [ngClass]="{'ended': ((startTimeCounter | appTimeDifference) < 0), 'imminent-end': ((startTimeCounter | appTimeDifference) > 0 && (startTimeCounter | appTimeDifference) <= 2), 'ends-soon': ((startTimeCounter | appTimeDifference) > 0 && (startTimeCounter | appTimeDifference) > 2 && (startTimeCounter | appTimeDifference) < 10), 'distant-end': ((startTimeCounter | appTimeDifference) >= 10)}">
<!--   <ion-row class="expiration-countdown" *ngIf="((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2)">
    <span class="expiration-lead">Deal expires in:</span>
    <app-countdown-timer class="item-countdown" fill="countdown" [end]="details?.expirationDate" [units]="{from: 'hour', to: 'second'}"></app-countdown-timer>
  </ion-row>

<ion-content class="item-content"> -->
  
  <ion-row class="expiration-countdown" *ngIf="((startTimeCounter | appTimeDifference) >= 0)">
    <span class="expiration-lead">Deal starts in:</span>
    <app-countdown-timer class="item-countdown" fill="countdown" [end]="startTimeCounter" [units]="{from: 'hour', to: 'second'}"></app-countdown-timer>
  </ion-row>
  <ion-row class="expiration-countdown" *ngIf="((endTimeCounter | appTimeDifference) >= 0 )">
    <span class="expiration-lead">Deal expires in:</span>
    <app-countdown-timer class="item-countdown" fill="countdown" [end]="endTimeCounter" [units]="{from: 'hour', to: 'second'}"></app-countdown-timer>
  </ion-row>
<!--   <span>endTimeCounter{{ (endTimeCounter | appTimeDifference) }}</span>
  <span>startTimeCounter{{ (startTimeCounter | appTimeDifference) }}</span> -->
<!--   <ion-content class="deals-details-content" [ngClass]="{'ended': ((details?.endTime | appTimeDifference) < 0), 'imminent-end': ((details?.endTime | appTimeDifference) > 0 && (details?.endTime | appTimeDifference) <= 2), 'ends-soon': ((details?.endTime | appTimeDifference) > 0 && (details?.endTime | appTimeDifference) > 2 && (details?.endTime | appTimeDifference) < 10), 'distant-end': ((details?.endTime | appTimeDifference) >= 10)}">
    <ion-row class="expiration-countdown" *ngIf="((details?.endTime | appTimeDifference) > 0 && (details?.endTime | appTimeDifference) <= 2)">
      <span class="expiration-lead">Deal expires in:</span>
      <app-countdown-timer class="item-countdown" fill="countdown" [end]="details?.endTime" [units]="{from: 'hour', to: 'second'}"></app-countdown-timer>
    </ion-row> -->

<!--     <section class="item-details-fields fields-section">
        <section class="content-section item-experience-wrapper">
            <h5 class="section-header">post details</h5>
            <ion-list class="experience-list" lines="none">
              <ion-item class="experience-item">
                <label class="experience-label">
                  <app-text-shell animation="bouncing" [data]="item?.title"></app-text-shell>
                </label>
              </ion-item>
            </ion-list>
          </section>
      </section> -->
  <ion-row class="item-info-row">
    <ion-col class="item-details-col" size="12">
      <h2 class="item-name">
        <ion-label color="secondary" position="floating">Date</ion-label>
        <!-- <app-text-shell animation="bouncing" [data]="dateTimeString"></app-text-shell> -->
        <ion-datetime disabled displayFormat="DD, MMM, YYYY" [(ngModel)]="dateTimeString" ></ion-datetime>
      </h2>
      <h2 class="item-name">
      <ion-label color="secondary" position="floating">Start time</ion-label>
      <!-- <app-text-shell animation="bouncing" [data]="startTimeString"></app-text-shell> -->
      <ion-datetime disabled displayFormat="HH:mm" [(ngModel)]="startTimeString"></ion-datetime>
      </h2>
      <h2 class="item-name">
        <ion-label color="secondary" position="floating">End time</ion-label>
        <!-- <app-text-shell animation="bouncing" [data]="endTimeString"></app-text-shell> -->
        <ion-datetime disabled displayFormat="HH:mm" [(ngModel)]="endTimeString"></ion-datetime>
      </h2>
      <h2 class="item-name">
        <ion-label color="secondary" position="floating">Number of places</ion-label>
        <app-text-shell animation="bouncing" [data]="item.count"></app-text-shell>
      </h2>
      <h2 class="item-name">
        <ion-label color="secondary" position="floating">Note</ion-label>
        <app-text-shell animation="bouncing" [data]="item.note"></app-text-shell>
      </h2>
      <h2 class="item-name">
        <ion-label color="secondary" position="floating">Status</ion-label>
        <app-text-shell animation="bouncing" [data]="item.status"></app-text-shell>
      </h2>
      <ion-button class="delete-btn" expand="block" color="primary" fill="outline" (click)="proposeParking()">Propose my parking</ion-button>
      <ion-button class="delete-btn" expand="block" color="primary" fill="outline" (click)="cancelDeal()">Cancel deal</ion-button>
      <p (click)="oberserableTimer()">Start Observable timer</p> {{subscribeTimer}}
    It is good to help for freee :)
    </ion-col>
    <!-- <div class="listing-item" *ngFor="let item of listing.items" [ngClass]="{'ended': ((item.expirationDate | appTimeDifference) < 0), 'imminent-end': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) <= 2), 'ends-soon': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) > 2 && (item.expirationDate | appTimeDifference) < 10), 'distant-end': ((item.expirationDate | appTimeDifference) >= 10)}">
    <div class="listing-item" [ngClass]="{'ended': ((endTime1 | appTimeDifference) < 0), 'imminent-end': ((endTime1 | appTimeDifference) > 0 && (endTime1 | appTimeDifference) <= 2), 'ends-soon': ((endTime1 | appTimeDifference) > 0 && (endTime1 | appTimeDifference) > 2 && (endTime1 | appTimeDifference) < 10), 'distant-end': ((endTime1 | appTimeDifference) >= 10)}">
    <ion-row class="item-info-row">       <ion-col class="code-wrapper">
        <span class="code-cta">Use this code:</span>
        <span class="item-code" [ngClass]="{'expired': ((item.endTime | appTimeDifference) < 0)}">
          <app-text-shell [data]="item.code"></app-text-shell>
        </span>
      </ion-col>
       <ion-col class="time-left-wrapper" [ngClass]="{'countdown-active': ((endTime1 | appTimeDifference) > 0 && (endTime1 | appTimeDifference) <= 2)}">
        <span> {{ (endTime1 | appTimeDifference) }} appTimeDifference </span> <br>
        <span> {{ dateTimeString }} dateTimeString</span>  <br>
        <span> {{ startTimeString }} startTimeString</span>  <br>
        <span> {{ endTimeString }} endTimeString</span>  <br>
        <span> {{ endTime1 }} endTime1</span>  <br>
        <span> {{ (endTime1 | appTimeAgo) }} appTimeAgo</span>  <br>
        <span class="expiration-cta">DEAL {{ ((endTime1 | appTimeDifference) < 0) ? 'EXPIRED' : 'EXPIRES IN' }}:</span>
        <ng-container *ngIf="((endTime1 | appTimeDifference) < 0 || (endTime1 | appTimeDifference) > 2)">
          <span class="item-time-left">
            <app-text-shell [data]="(endTime1 | appTimeAgo)"></app-text-shell>
          </span>
        </ng-container>
        <ng-container *ngIf="((endTime1 | appTimeDifference) >= 0 && (endTime1 | appTimeDifference) <= 2)">
          <ion-row class="countdown-wrapper">
            <app-countdown-timer class="item-countdown" fill="inner-time" [end]="endTime1" [units]="{from: 'hour', to: 'second'}"></app-countdown-timer>
          </ion-row>
        </ng-container>
      </ion-col> 
    </ion-row>
  </div>-->
<!--     <ion-col class="actions-col" size="12">
      <ion-row>
        <ion-col size="3">
          <ion-button class="action-btn" color="secondary">
            <ion-icon class="btn-icon" slot="icon-only" name="mail"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="3">
          <ion-button class="action-btn" color="secondary">
            <ion-icon class="btn-icon" slot="icon-only" name="call"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="3">
          <ion-button class="action-btn" color="secondary">
            <ion-icon class="btn-icon" slot="icon-only" name="videocam"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="3">
          <ion-button class="action-btn" color="secondary">
            <ion-icon class="btn-icon" slot="icon-only" name="text"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-col> -->
  </ion-row>

<!--   <section class="content-section user-languages-wrapper">
    <h5 class="section-header">Languages</h5>
    <ion-row class="language-item-row">
      <ion-col class="language-item">
        <span class="language-name">English</span>
        <ion-progress-bar class="language-score" type="determinate" [value]="(user.languages?.english / 10)"></ion-progress-bar>
      </ion-col>
    </ion-row>
    <ion-row class="language-item-row">
      <ion-col class="language-item">
        <span class="language-name">Spanish</span>
        <ion-progress-bar class="language-score" type="determinate" [value]="(user.languages?.spanish / 10)"></ion-progress-bar>
      </ion-col>
    </ion-row>
    <ion-row class="language-item-row">
      <ion-col class="language-item">
        <span class="language-name">French</span>
        <ion-progress-bar class="language-score" type="determinate" [value]="(user.languages?.french / 10)"></ion-progress-bar>
      </ion-col>
    </ion-row>
  </section> -->

<!--   <section class="content-section user-experience-wrapper">
    <h5 class="section-header">Skills</h5>
    <ion-list class="experience-list" lines="none">
      <ion-item class="experience-item" *ngFor="let skill of user.skills">
        <label class="experience-label">
          <app-text-shell animation="bouncing" [data]="skill?.name"></app-text-shell>
        </label>
        <ion-icon class="experience-list-icon" slot="start" name="md-checkmark" color="secondary"></ion-icon>
      </ion-item>
    </ion-list>
  </section> -->

<!--   <section class="content-section related-users-wrapper" *ngIf="relatedUsers.length > 0">
    <h5 class="section-header">Users with similar skills</h5>
    <ion-row class="related-users-row">
      <ion-col class="related-user-item" size="2" *ngFor="let user of relatedUsers">
        <app-aspect-ratio [ratio]="{w: 1, h: 1}">
          <app-image-shell [mode]="'cover'" class="related-user-picture" [src]="user.avatar" [routerLink]="['/ads/details', user.id]"></app-image-shell>
        </app-aspect-ratio>
        <span class="related-user-name">
          <app-text-shell [data]="user.name"></app-text-shell>
        </span>
      </ion-col>
    </ion-row>
  </section> -->
</ion-content>
